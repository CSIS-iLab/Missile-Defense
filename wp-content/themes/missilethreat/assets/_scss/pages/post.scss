@use '../abstracts' as *;
@use '../components/footnotes';

.single__content {
  max-width: $size__content-max-width;
  margin-right: auto;
  margin-left: auto;
  color: $color-text-dark-100;

  /*----------  Paragraphs and In-line links  ----------*/

  > p {
    @extend %font-body-long-lg;
    color: $color-text-dark-190;
    
    &:not(:last-child) {
      margin-bottom: rem(40px);
    }

    a {
      color: $color-primary-blue-200;
      text-decoration: underline;
      transition: color 0.3s ease-in-out;

      &:hover {
        color: $color-primary-blue-500;
      }
    }
  }

  /*----------  External Link  ----------*/

  /* stylelint-disable */
  a[href*="//"]:not([href*="missile-threat.local"]):not([href*="localhost"]):not([href*="missilethreat"])
  {
    /* stylelint-enable */
    &::after {
      content: '';
      display: inline-block;
      width: 0.67em;
      height: 0.67em;
      margin-left: rem(2px);
      background-image: url('/wp-content/themes/missilethreat/assets/static/external-link.svg');
      background-size: 100% 100%;
      filter: invert(49%) sepia(7%) saturate(1276%) hue-rotate(148deg) brightness(91%) contrast(85%);
      transition: filter 0.3s ease-in-out;
    }

    &:hover::after {
      filter: invert(35%) sepia(52%) saturate(295%) hue-rotate(148deg) brightness(93%) contrast(90%);
    }
  }

  /*----------  Headings  ----------*/

  > h2,
  > h3,
  > h4,
  > h5,
  > h6 {
    margin-bottom: rem(12px);
  }

  > h3,
  > h4 {
    margin-top: rem(40px);
    font-weight: normal;
  }

  > h5,
  > h6 {
    margin-top: rem(32px);
  }

  > h2,
  > h5,
  > h6 {
    font-weight: 600;
  }

  > h2 {
    @extend %font-copy-heading-2;
    margin-top: rem(56px);
  }

  > h3 {
    @extend %font-copy-heading-3;
  }

  > h4 {
    @extend %font-ui-heading-md;
  }

  > h5 {
    @extend %font-copy-heading-5;
  }

  > h6 {
    @extend %font-copy-heading-6;
  }

  /*----------  Lists  ----------*/

  > ul,
  > ol {
    @extend %font-body-list-lg;
    margin-top: rem(12px);
    margin-bottom: 0;
    padding-bottom: rem(24px);
    padding-left: rem(32px);
    color: $color-text-dark-190;

    li:not(:last-child) {
      margin-bottom: rem(8px);
    }
  }

  /*----------  Figure  ----------*/

  figure {
    margin-bottom: rem(32px) !important;
  }

  /*----------  Blockquotes  ----------*/

  blockquote {
    @extend %font-copy-quote-sm;
    margin-top: rem(32px);
    margin-bottom: rem(32px);
    margin-left: rem(32px);
    padding-left: rem(24px);
    color: $color-primary-blue-200;
    text-align: left;
    border-left: 3px solid $color-primary-light-blue;
    
    /* stylelint-disable-next-line */
    &.has-text-align-right {
      @extend %font-copy-quote-lg;
      margin-top: rem(12px);
      margin-bottom: rem(24px);
      padding-left: 0;
      border-left: 0;
    }

    cite {
      @extend %font-body-short-md;
      display: block;
      margin: rem(12px) auto 0 auto;
      color: $color-text-dark-170;
      font-style: normal;
    }
  }

  /*----------  Gallery  ----------*/

  .wp-block-gallery {
    @include missiledefense-full-width-wrapper;

    > * {
      @include missiledefense-full-width-content($size__container-max-width);
    }

    > figcaption {
      @extend %font-body-short-md;
      margin: rem(12px) auto 0 auto !important;
      color: $color-text-dark-170;

      @include breakpoint('medium') {
        width: $size__content-max-width;
        padding: 0;
      }
    }

    .blocks-gallery-grid {
      flex-direction: column;
      gap: rem(10px);

      @include breakpoint('medium') {
        flex-direction: row;
      }
    }

    .blocks-gallery-item {
      width: 100%;
      margin-right: 0;
      margin-bottom: 0;

      @include breakpoint('medium') {
        width: calc(33.33333% - 10.66667px);
      }

      /* stylelint-disable-next-line */
      figure {
        max-height: rem(230px);
        margin-bottom: 0 !important;
      }
    }
    
    .blocks-gallery-item__caption {
      @extend %font-ui-text-md;
      padding-bottom: rem(12px);
      color: $color-text-light-190;
      background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, #000 100%);
    }
  }

  /*----------  Videos  ----------*/

  iframe[src*='youtube'] {
    margin-top: rem(32px);
    margin-bottom: rem(32px);
  }
}

/*----------  Post footer  ----------*/

.single__footer {

  /*----------  Author and Attribution  ----------*/

  .post__authors-author,
  &-attribution {
    @extend %font-body-short-md-serif;
    color: $color-text-dark-100;
  }

  .post__authors-author {
    margin-bottom: rem(16px);
  }

  &-attribution {
    margin-bottom: rem(48px);
    font-style: italic;
  }

  /*----------  Citation  ----------*/

  .cite {
    &__heading {
      @extend %font-ui-heading-xs;
      color: $color-primary-blue-200;
      text-transform: uppercase;
    }

    &__container {
      margin-top: rem(16px);
      margin-bottom: rem(56px);

      @include breakpoint('medium') {
        display: flex;
        gap: rem(8px);
        align-items: flex-start;
      }
    }

    &__citation {
      @extend %font-body-short-sm;
      display: block;
      margin-bottom: rem(16px);
      padding: rem(8px);
      color: $color-text-dark-100;
      border: 1px solid $color-primary-light-blue;
    }
  }
}


